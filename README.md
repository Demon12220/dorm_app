# Описание проекта: Система управления общежитием

Это настольное приложение, разработанное на Python с использованием PyWebView, предназначено для управления данными общежития. Оно позволяет администраторам и пользователям управлять информацией о комнатах, жильцах и платежах. Приложение распространяется в виде установщика Windows, что делает его установку и использование простым и удобным для конечных пользователей.

## Технологический стек

*   **Основа:** Python с Flask (в качестве внутреннего движка)
*   **База данных:** SQLAlchemy с SQLite
*   **Аутентификация:** Flask-Login
*   **Интерфейс:** HTML, CSS, JavaScript
*   **Оболочка приложения:** PyWebView
*   **Создание установщика:** PyInstaller и Inno Setup

## Основные возможности

1.  **Аутентификация пользователей:**
    *   Регистрация новых пользователей.
    *   Вход и выход из системы.
    *   Разделение прав доступа (обычный пользователь и администратор). При запуске автоматически создается пользователь `admin` с паролем `admin123`.

2.  **Панель управления (Dashboard):**
    *   Отображает сводную информацию и статистику.
    *   Показывает статистику заселения комнат по этажам (общее количество комнат, занятые, свободные, количество жильцов).

3.  **Управление комнатами:**
    *   Просмотр списка всех комнат.
    *   Добавление новых комнат с указанием номера, этажа, вместимости и статуса активности.
    *   Редактирование информации о существующих комнатах.
    *   Удаление комнат (только если в них нет жильцов).

4.  **Управление жильцами:**
    *   Просмотр списка всех жильцов.
    *   Добавление новых жильцов с указанием личных данных (ФИО, дата рождения, паспорт), контактной информации, дат заселения/выселения и номера комнаты.
    *   Редактирование информации о жильцах.
    *   Удаление жильцов.

5.  **Управление платежами:**
    *   Просмотр списка всех платежей.
    *   Добавление новых платежей с указанием суммы, периода оплаты, статуса и привязки к жильцу.
    *   Редактирование информации о платежах.
    *   Удаление платежей.

## Структура базы данных

Основные сущности:

*   **User:** Пользователи системы (включая администраторов). Хранит логин, email, хеш пароля и флаг администратора.
*   **Room:** Комнаты общежития. Хранит номер, этаж, вместимость, статус и связь с жильцами.
*   **Resident:** Жильцы общежития. Хранит личные данные, контактную информацию, даты проживания, связь с комнатой и платежами.
*   **Payment:** Платежи за проживание. Хранит сумму, дату платежа, период оплаты, статус и связь с жильцом.

## Структура проекта

Проект организован с использованием Flask Blueprints для разделения логики по модулям:

*   `app/`: Основная директория приложения.
    *   `__init__.py`: Фабрика приложения Flask, инициализация расширений.
    *   `models.py`: Определение моделей SQLAlchemy.
    *   `forms.py`: Определение форм WTForms (файл не был прочитан, но предполагается его наличие).
    *   `routes/`: Директория с маршрутами (blueprints).
        *   `main.py`: Основные маршруты (главная страница, панель управления).
        *   `auth.py`: Маршруты аутентификации.
        *   `residents.py`: Маршруты для управления жильцами.
        *   `rooms.py`: Маршруты для управления комнатами.
        *   `payments.py`: Маршруты для управления платежами.
*   `templates/`: HTML-шаблоны Jinja2, разделенные по модулям.
*   `static/`: Статические файлы (CSS, JavaScript).
*   `config.py`: Конфигурация приложения.
*   `app_desktop.py`: Основная точка входа для запуска приложения.
*   `make_installer_easy.bat`: Скрипт для создания установщика приложения.
*   `app_desktop.spec`: Конфигурационный файл для PyInstaller.
*   `dormitory_setup.iss`: Скрипт для Inno Setup для создания установщика.
*   `requirements.txt`: Список зависимостей Python.
*   `init_db.py`, `seed_data.py`: Скрипты для инициализации и наполнения базы данных.
*   `instance/`: Директория для файлов экземпляра приложения (например, база данных SQLite).

## Установка приложения

Для конечных пользователей приложение распространяется в виде установщика Windows:

1. Запустите файл `dormitory_setup.exe`
2. Следуйте инструкциям мастера установки
3. После завершения установки запустите приложение через ярлык на рабочем столе или в меню "Пуск"

Для разработчиков, желающих собрать установщик самостоятельно:

1. Установите необходимые зависимости: `pip install -r requirements.txt`
2. Установите Inno Setup 6 с сайта [jrsoftware.org/isdl.php](https://jrsoftware.org/isdl.php)
3. Запустите скрипт `make_installer_easy.bat` для создания установщика
4. Готовый установщик будет доступен в папке `output`

## Учетные данные по умолчанию
После первого запуска приложения автоматически создается учетная запись администратора:
- Логин: `admin`
- Пароль: `admin123`

Рекомендуется сменить этот пароль после первого входа в систему.
